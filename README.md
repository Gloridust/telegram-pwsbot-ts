# PWS - TelegramæŠ•ç¨¿æœºå™¨äºº (TypeScriptç‰ˆ)

![](https://img.shields.io/badge/license-MIT-green.svg)
![](https://img.shields.io/badge/TypeScript-5.3-blue.svg)
![](https://img.shields.io/badge/Node.js-18+-green.svg)

è¿™æ˜¯ä¸€ä¸ªåŸºäº TypeScript é‡æ„ä¼˜åŒ–çš„ Telegram æŠ•ç¨¿æœºå™¨äººï¼Œå¸®åŠ©è®¢é˜…è€…å‘é¢‘é“æŠ•ç¨¿ï¼Œæ”¯æŒå¤šå›¾æŠ•ç¨¿ã€ç¨¿ä»¶é™„åŠ è¯„è®ºã€å¤œé—´è‡ªåŠ¨æ¶ˆéŸ³æ¨é€ã€å¤šè¯­è¨€ã€é»‘åå•ç­‰åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ”§ **TypeScript é‡æ„**: å®Œå…¨ä½¿ç”¨ TypeScript é‡å†™ï¼Œæä¾›æ›´å¥½çš„ç±»å‹å®‰å…¨å’Œå¼€å‘ä½“éªŒ
- ğŸ“ **å¤šæ ¼å¼æŠ•ç¨¿**: æ”¯æŒæ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ç­‰å¤šç§æ ¼å¼æŠ•ç¨¿
- ğŸ–¼ï¸ **å¤šå›¾æŠ•ç¨¿**: æ”¯æŒ MediaGroup å¤šå›¾åŒæ—¶æŠ•ç¨¿
- ğŸ’¬ **ç¨¿ä»¶è¯„è®º**: ç®¡ç†å‘˜å¯ä»¥ä¸ºç¨¿ä»¶æ·»åŠ è¯„è®º
- ğŸŒ™ **å¤œé—´é™éŸ³**: æ”¯æŒå¤œé—´è‡ªåŠ¨é™éŸ³æ¨é€ (00:00-06:50)
- ğŸŒ **å¤šè¯­è¨€**: æ”¯æŒä¸­æ–‡ç®€ä½“ã€ä¸­æ–‡ç¹ä½“
- ğŸš« **é»‘åå•**: æ”¯æŒç”¨æˆ·é»‘åå•åŠŸèƒ½
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**: ä½¿ç”¨ LowDB è¿›è¡Œæ•°æ®å­˜å‚¨
- ğŸ”„ **ä¼šè¯ç®¡ç†**: æ”¯æŒç®¡ç†å‘˜ä¸ç”¨æˆ·çš„å¯¹è¯åŠŸèƒ½

## ğŸš€ å®‰è£…

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm æˆ– yarn

### å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd telegram-pwsbot-ts
npm install
```

### é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿æ–‡ä»¶ï¼š

```bash
cp env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å†™å¿…è¦çš„é…ç½®ï¼š

```bash
vim .env
```

**å¿…å¡«å‚æ•°ï¼š**

- `Token`: æœºå™¨äººä»¤ç‰Œï¼Œé€šè¿‡ [@botfather](https://t.me/botfather) è·å–
- `Admin`: ç®¡ç†å‘˜ç”¨æˆ·IDï¼Œé€šè¿‡ [@userinfobot](https://t.me/userinfobot) è·å–
- `Channel`: æŠ•ç¨¿é¢‘é“ï¼Œæ ¼å¼ä¸º `@é¢‘é“ID`

**å¯é€‰å‚æ•°ï¼š**

- `AutoMute`: å¤œé—´é™éŸ³æ—¶åŒºï¼Œå¦‚ `Asia/Shanghai`
- `Lang`: è¯­è¨€è®¾ç½®ï¼Œæ”¯æŒ `zh-CN`ã€`zh-TW`

## ğŸƒâ€â™‚ï¸ è¿è¡Œ

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

### ç”Ÿäº§æ¨¡å¼

```bash
npm run build
npm start
```

### ä½¿ç”¨ PM2 (æ¨è)

```bash
# å®‰è£… PM2
npm install pm2 -g

# å¯åŠ¨é¡¹ç›®
pm2 start npm --name "pwsbot" -- start

# é‡å¯é¡¹ç›®
pm2 restart pwsbot
```

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

1. **è®¾ç½®å®¡ç¨¿ç¾¤**ï¼šå°†æœºå™¨äººæ·»åŠ åˆ°å®¡ç¨¿ç¾¤ï¼Œåœ¨ç¾¤å†…ä½¿ç”¨ `/setgroup` å‘½ä»¤è®¾ç½®å½“å‰ç¾¤ä¸ºå®¡ç¨¿ç¾¤
2. **æ·»åŠ åˆ°é¢‘é“**ï¼šå°†æœºå™¨äººæ·»åŠ ä¸ºé¢‘é“ç®¡ç†å‘˜
3. **æµ‹è¯•åŠŸèƒ½**ï¼šç§èŠæœºå™¨äººå‘é€ `/start` æµ‹è¯•åŸºæœ¬åŠŸèƒ½

## ğŸ® å‘½ä»¤åˆ—è¡¨

### ç”¨æˆ·å‘½ä»¤ (ç§èŠ)

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/start` | æ˜¾ç¤ºæŠ•ç¨¿è¯´æ˜ |
| `/version` | æ˜¾ç¤ºæœºå™¨äººç‰ˆæœ¬ä¿¡æ¯ |

### ç®¡ç†å‘˜å‘½ä»¤ (å®¡ç¨¿ç¾¤)

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/setgroup` | è®¾ç½®å½“å‰ç¾¤ä¸ºå®¡ç¨¿ç¾¤ |
| `/ok [è¯„è®º]` | é€šè¿‡ç¨¿ä»¶ï¼Œå¯é™„åŠ è¯„è®º |
| `/no <ç†ç”±>` | æ‹’ç»ç¨¿ä»¶ï¼Œéœ€æä¾›ç†ç”± |
| `/re <å†…å®¹>` | ä¸ç”¨æˆ·å¯¹è¯å›å¤ |
| `/ban [ç†ç”±]` | æ‹‰é»‘ç”¨æˆ· |
| `/unban` | è§£é™¤æ‹‰é»‘ |
| `/unre` | ç»“æŸå¯¹è¯çŠ¶æ€ |
| `/echo <å†…å®¹>` | å•æ¬¡å›å¤ç”¨æˆ· |
| `/pwshelp` | æ˜¾ç¤ºå‘½ä»¤å¸®åŠ© |

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
telegram-pwsbot-ts/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config.ts   # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ bot.ts      # æœºå™¨äººå®ä¾‹
â”‚   â”œâ”€â”€ handlers/       # å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ MessageHandler.ts    # æ¶ˆæ¯å¤„ç†åŸºç±»
â”‚   â”‚   â””â”€â”€ CommandHandler.ts    # å‘½ä»¤å¤„ç†å™¨
â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Database.ts          # æ•°æ®åº“åŸºç±»
â”‚   â”‚   â”œâ”€â”€ Submission.ts        # æŠ•ç¨¿æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ BlackList.ts         # é»‘åå•æ¨¡å‹
â”‚   â”‚   â””â”€â”€ ReplySession.ts      # ä¼šè¯æ¨¡å‹
â”‚   â”œâ”€â”€ utils/          # å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ Lang.ts     # è¯­è¨€ç®¡ç†
â”‚   â”‚   â””â”€â”€ Helper.ts   # è¾…åŠ©å·¥å…·
â”‚   â”œâ”€â”€ types/          # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts    # ä¸»è¦ç±»å‹æ¥å£
â”‚   â””â”€â”€ main.ts         # å…¥å£æ–‡ä»¶
â”œâ”€â”€ lang/               # è¯­è¨€æ–‡ä»¶
â”‚   â”œâ”€â”€ zh-CN.json      # ä¸­æ–‡ç®€ä½“
â”‚   â””â”€â”€ zh-TW.json      # ä¸­æ–‡ç¹ä½“
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .eslintrc.json
â””â”€â”€ README.md
```

## ğŸ”§ å¼€å‘

### è„šæœ¬å‘½ä»¤

```bash
# æ„å»ºé¡¹ç›®
npm run build

# å¼€å‘æ¨¡å¼ (çƒ­é‡è½½)
npm run dev

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ£€æŸ¥
npm run lint

# ä¿®å¤ä»£ç æ ¼å¼
npm run lint:fix

# æ¸…ç†æ„å»ºæ–‡ä»¶
npm run clean

# æµ‹è¯•è¿è¡Œ
npm run test
```

### æŠ€æœ¯æ ˆ

- **TypeScript**: ç±»å‹å®‰å…¨çš„ JavaScript
- **Node.js**: è¿è¡Œæ—¶ç¯å¢ƒ
- **node-telegram-bot-api**: Telegram Bot API åº“
- **LowDB**: è½»é‡çº§ JSON æ•°æ®åº“
- **dotenv**: ç¯å¢ƒå˜é‡ç®¡ç†
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ GitHub Issue
- è”ç³»é¡¹ç›®ç»´æŠ¤è€…

---

**æ³¨æ„**: æ¯æ¬¡ä¿®æ”¹ `.env` é…ç½®æ–‡ä»¶åï¼Œéƒ½éœ€è¦é‡æ–°å¯åŠ¨é¡¹ç›®æ‰èƒ½ç”Ÿæ•ˆã€‚ 